# nlp-poem

　好きなアーティスト4組の全450曲を形態素解析して５調と７調の歌詞を収集する。ランダムに組み合わせたものの中で**係受けが成立しているもの**のみを抽出して返す。



## 使い方

```bash
$ git clone https://github.com/diagonal-m/nlp-poem.git
$ cd nlp-poem
$ docker build -f docker/Dockerfile -t nlp-poem --no-cache . 
$ docker run nlp-poem:latest  # 実行 - 川柳が10個生成される
```



## 生成結果

- 夢を見て ねえどうしても 僕たちは
- 正しさを 探してる音 幻覚か
- 嘆いても 笑っているよ 朝焼けに
- 不登校 どこであろうと ケンカする
- 間違いも 耐え忍ぶよう 君は立つ
- 蝉の音 光となって 落とされた
- 村人A 愛せた時に 笑うから
- 青い春 いつかさよなら クレヨンで
- へつらいも 残していこう 青い春
- 悔しさも 現実逃避 生き抜いた



## ディレクトリ構成

```bash
nlp-poem/
 ├── app/
 |    ├── lyrics/
 |    |    └── lyrics.pickle  # 歌詞データ
 |    ├── compose_poem.py  # 川柳生成スクリプト
 |    ├── consts.py  # 定数配置用
 |    └── uta_net.py  # uta-netから歌詞を収集するためのスクリプト
 ├── docker/
 |    ├── Dockerfile
 |    └── requirements.txt
 └── README.md
```



## MeCabで形態素解析

 「形態素解析(Morphological Analysis)」とは、自然言語処理分野で主に事前処理として用いられる手法であり、対象となる言語の文法や単語の品詞情報をもとに、文章を形態素(単語が意味を持つ最小の単位)に分解する解析を指す。例えば、「すもももももももものうち」を形態素解析であるMeCabで解析すると「すもも も もも も もも の うち」に分解される。形態素解析器は、自身の参照する辞書より単語の品詞情報を取得して文字列を解析する。辞書には単語の品詞情報が含まれているが、辞書間で単語の種類や品詞情報が共通化されているわけではない。つまり、別の辞書を使用するとまったく別の品詞情報を用いていることと同じになるため、形態素解析結果が異なる可能性がある。

　Mecabは京都大学情報学研究科と日本電信電話株式会社コミュニケーション科学基礎研究所の共同研究で開発された形態素解析エンジンである．
言語，辞書，コーパス(データベース化されている言語資料)に依存しない汎用的な設計方針を採用しており，C言語，C++，Java，python等，数多くの言語で使用することが可能である．また，設定することで様々な辞書を用いることが可能なため，日本語の形態素解析エンジンの中では最もよく使用されている。

## CaboChaで係受け解析

　CaboChaはSVM(Support Vector Machines)に基づく係り受け解析器で、係受け解析は文節間の「修飾する(係る)」「修飾される(受ける)」の関係を調べる事。



## 係受け判定あり VS 係受け判定なし

| 係受け判定あり                     | 係受け判定なし                       |
| ---------------------------------- | ------------------------------------ |
| さようなら 物質主義 望まない       | 蝉の音 負けないように ありもせず     |
| 泣いた事 開けないままで 愛なんて   | 羽ばたいて 隠れてないで 地平線       |
| 泣いた事 全ての日々を さようなら   | あなたでも ただ降り落ちた 結末は     |
| 気付かずに 高鳴る胸が わかってた   | 知りながら わかって欲しい 青い春     |
| 振り向けぬ 才能不在 メロディー     | 1日分 旅立った唄 こりもせず          |
| ひとつだけ わかって欲しい 信じるよ | 風の街 雨は気まぐれ 温もりが         |
| さあどうぞ 死なない為に 落ち込んで | 聞き慣れた 言うもんだから 無いモノで |
| 海が凪ぎ 戦っていた 出てこいよ     | 苦しんで 探し続ける 拾うタメ         |
| 星殺し 願っていたい 君は立つ       | メロディー イツモアナタノ 縷々として |
| そうだった 息を止めてた 虚しくて   | 思うけど 戦っていた 愛しさも         |